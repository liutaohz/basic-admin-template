"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[311],{49576:function(e,r,n){n.r(r),n.d(r,{default:function(){return Q}});var t={};n.r(t),n.d(t,{addUser:function(){return h},deleteUser:function(){return j},getUserDetail:function(){return x},modifyUser:function(){return w},queryUserList:function(){return f}});var a=n(27424),u=n.n(a),s=n(17061),i=n.n(s),c=n(42122),o=n.n(c),l=n(17156),p=n.n(l),d=n(9927);function f(e,r){return m.apply(this,arguments)}function m(){return(m=p()(i()().mark((function e(r,n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/queryUserList",o()({method:"GET",params:o()({},r)},n||{})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,r){return v.apply(this,arguments)}function v(){return(v=p()(i()().mark((function e(r,n){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/v1/user",o()({method:"POST",headers:{"Content-Type":"application/json"},data:r},n||{})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,r){return y.apply(this,arguments)}function y(){return(y=p()(i()().mark((function e(r,n){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.userId,e.abrupt("return",(0,d.request)("/api/v1/user/".concat(t),o()({method:"GET",params:o()({},r)},n||{})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,r,n){return b.apply(this,arguments)}function b(){return(b=p()(i()().mark((function e(r,n,t){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.userId,e.abrupt("return",(0,d.request)("/api/v1/user/".concat(a),o()({method:"PUT",headers:{"Content-Type":"application/json"},params:o()({},r),data:n},t||{})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,r){return k.apply(this,arguments)}function k(){return(k=p()(i()().mark((function e(r,n){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.userId,e.abrupt("return",(0,d.request)("/api/v1/user/".concat(t),o()({method:"DELETE",params:o()({},r)},n||{})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=t,g=n(6110),C=n(23304),q=n(2236),P=n(35351),S=n(10154),E=n(96074),U=n(15867),I=n(85265),L=n(67294),T=n(90332),F=n(85893),V=function(e){var r=e.modalVisible,n=e.onCancel;return(0,F.jsx)(T.Z,{destroyOnClose:!0,title:"新建",width:420,open:r,onCancel:function(){return n()},footer:null,children:e.children})},R=n(62113),N=n(5966),M=n(90672),O=n(64317),A=n(86615),D=n(22452),G=function(e){return(0,F.jsxs)(R.L,{stepsProps:{size:"small"},stepsFormRender:function(r,n){return(0,F.jsx)(T.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"规则配置",open:e.updateModalVisible,footer:n,onCancel:function(){return e.onCancel()},children:r})},onFinish:e.onSubmit,children:[(0,F.jsxs)(R.L.StepForm,{initialValues:{name:e.values.name,nickName:e.values.nickName},title:"基本信息",children:[(0,F.jsx)(N.Z,{width:"md",name:"name",label:"规则名称",rules:[{required:!0,message:"请输入规则名称！"}]}),(0,F.jsx)(M.Z,{name:"desc",width:"md",label:"规则描述",placeholder:"请输入至少五个字符",rules:[{required:!0,message:"请输入至少五个字符的规则描述！",min:5}]})]}),(0,F.jsxs)(R.L.StepForm,{initialValues:{target:"0",template:"0"},title:"配置规则属性",children:[(0,F.jsx)(O.Z,{width:"md",name:"target",label:"监控对象",valueEnum:{0:"表一",1:"表二"}}),(0,F.jsx)(O.Z,{width:"md",name:"template",label:"规则模板",valueEnum:{0:"规则模板一",1:"规则模板二"}}),(0,F.jsx)(A.Z.Group,{name:"type",width:"md",label:"规则类型",options:[{value:"0",label:"强"},{value:"1",label:"弱"}]})]}),(0,F.jsxs)(R.L.StepForm,{initialValues:{type:"1",frequency:"month"},title:"设定调度周期",children:[(0,F.jsx)(D.Z,{name:"time",label:"开始时间",rules:[{required:!0,message:"请选择开始时间！"}]}),(0,F.jsx)(O.Z,{name:"frequency",label:"监控对象",width:"xs",valueEnum:{month:"月",week:"周"}})]})]})},z=Z,K=z.addUser,W=z.queryUserList,B=z.deleteUser,Y=z.modifyUser,_=function(){var e=p()(i()().mark((function e(r){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.ZP.loading("正在添加"),e.prev=1,e.next=4,K(o()({},r));case 4:return n(),S.ZP.success("添加成功"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),n(),S.ZP.error("添加失败请重试！"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}(),H=function(){var e=p()(i()().mark((function e(r){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.ZP.loading("正在配置"),e.prev=1,e.next=4,Y({userId:r.id||""},{name:r.name||"",nickName:r.nickName||"",email:r.email||""});case 4:return n(),S.ZP.success("配置成功"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),n(),S.ZP.error("配置失败请重试！"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}(),J=function(){var e=p()(i()().mark((function e(r){var n,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=S.ZP.loading("正在删除"),r){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,B({userId:(null===(t=r.find((function(e){return e.id})))||void 0===t?void 0:t.id)||""});case 6:return n(),S.ZP.success("删除成功，即将刷新"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),n(),S.ZP.error("删除失败，请重试"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(r){return e.apply(this,arguments)}}(),Q=function(){var e=(0,L.useState)(!1),r=u()(e,2),n=r[0],t=r[1],a=(0,L.useState)(!1),s=u()(a,2),c=s[0],l=s[1],d=(0,L.useState)({}),f=u()(d,2),m=f[0],h=f[1],v=(0,L.useRef)(),x=(0,L.useState)(),y=u()(x,2),w=y[0],b=y[1],j=(0,L.useState)([]),k=u()(j,2),Z=k[0],S=k[1],T=[{title:"名称",dataIndex:"name",tip:"名称是唯一的 key",formItemProps:{rules:[{required:!0,message:"名称为必填项"}]}},{title:"昵称",dataIndex:"nickName",valueType:"text"},{title:"性别",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"男",status:"MALE"},1:{text:"女",status:"FEMALE"}}},{title:"操作",dataIndex:"option",valueType:"option",render:function(e,r){return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("a",{onClick:function(){l(!0),h(r)},children:"配置"}),(0,F.jsx)(E.Z,{type:"vertical"}),(0,F.jsx)("a",{href:"",children:"订阅警报"})]})}}];return(0,F.jsxs)(g._z,{header:{title:"CRUD 示例"},children:[(0,F.jsx)(C.Z,{headerTitle:"查询表格",actionRef:v,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,F.jsx)(U.ZP,{type:"primary",onClick:function(){return t(!0)},children:"新建"},"1")]},request:function(){var e=p()(i()().mark((function e(r,n,t){var a,u,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(o()(o()({},r),{},{sorter:n,filter:t}));case 2:return a=e.sent,u=a.data,s=a.success,e.abrupt("return",{data:(null==u?void 0:u.list)||[],success:s});case 6:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}(),columns:T,rowSelection:{onChange:function(e,r){return S(r)}}}),(null==Z?void 0:Z.length)>0&&(0,F.jsxs)(q.S,{extra:(0,F.jsxs)("div",{children:["已选择"," ",(0,F.jsx)("a",{style:{fontWeight:600},children:Z.length})," ","项  "]}),children:[(0,F.jsx)(U.ZP,{onClick:p()(i()().mark((function e(){var r,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(Z);case 2:S([]),null===(r=v.current)||void 0===r||null===(n=r.reloadAndRest)||void 0===n||n.call(r);case 4:case"end":return e.stop()}}),e)}))),children:"批量删除"}),(0,F.jsx)(U.ZP,{type:"primary",children:"批量审批"})]}),(0,F.jsx)(V,{onCancel:function(){return t(!1)},modalVisible:n,children:(0,F.jsx)(C.Z,{onSubmit:function(){var e=p()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(r);case 2:e.sent&&(t(!1),v.current&&v.current.reload());case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:T})}),m&&Object.keys(m).length?(0,F.jsx)(G,{onSubmit:function(){var e=p()(i()().mark((function e(r){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(r);case 2:e.sent&&(l(!1),h({}),v.current&&v.current.reload());case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),onCancel:function(){l(!1),h({})},updateModalVisible:c,values:m}):null,(0,F.jsx)(I.Z,{width:600,open:!!w,onClose:function(){b(void 0)},closable:!1,children:(null==w?void 0:w.name)&&(0,F.jsx)(P.vY,{column:2,title:null==w?void 0:w.name,request:p()(i()().mark((function e(){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:w||{}});case 1:case"end":return e.stop()}}),e)}))),params:{id:null==w?void 0:w.name},columns:T})})]})}}}]);